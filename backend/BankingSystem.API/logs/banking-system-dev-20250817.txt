[2025-08-17 10:52:19.330 +10:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.429 +10:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. <s:Microsoft.EntityFrameworkCore.Migrations>
[2025-08-17 10:52:19.444 +10:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.481 +10:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.496 +10:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-08-17 00:52:19.484095+00:00');
SELECT changes(); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.605 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.628 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.637 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.659 +10:00 [INF] Applying migration '20250817005204_InitialCreate'. <s:Microsoft.EntityFrameworkCore.Migrations>
[2025-08-17 10:52:19.714 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_AspNetRoles" PRIMARY KEY,
    "Name" TEXT NULL,
    "NormalizedName" TEXT NULL,
    "ConcurrencyStamp" TEXT NULL
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.716 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUsers" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_AspNetUsers" PRIMARY KEY,
    "FirstName" TEXT NOT NULL,
    "LastName" TEXT NOT NULL,
    "IdNumber" TEXT NOT NULL,
    "DateOfBirth" TEXT NOT NULL,
    "Address" TEXT NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NOT NULL,
    "IsActive" INTEGER NOT NULL,
    "FailedLoginAttempts" INTEGER NOT NULL,
    "LockoutEndTime" TEXT NULL,
    "UserName" TEXT NULL,
    "NormalizedUserName" TEXT NULL,
    "Email" TEXT NULL,
    "NormalizedEmail" TEXT NULL,
    "EmailConfirmed" INTEGER NOT NULL,
    "PasswordHash" TEXT NULL,
    "SecurityStamp" TEXT NULL,
    "ConcurrencyStamp" TEXT NULL,
    "PhoneNumber" TEXT NULL,
    "PhoneNumberConfirmed" INTEGER NOT NULL,
    "TwoFactorEnabled" INTEGER NOT NULL,
    "LockoutEnd" TEXT NULL,
    "LockoutEnabled" INTEGER NOT NULL,
    "AccessFailedCount" INTEGER NOT NULL
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.718 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetRoleClaims" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_AspNetRoleClaims" PRIMARY KEY AUTOINCREMENT,
    "RoleId" TEXT NOT NULL,
    "ClaimType" TEXT NULL,
    "ClaimValue" TEXT NULL,
    CONSTRAINT "FK_AspNetRoleClaims_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.719 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Accounts" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Accounts" PRIMARY KEY AUTOINCREMENT,
    "AccountNumber" TEXT NOT NULL,
    "UserId" TEXT NOT NULL,
    "AccountType" TEXT NOT NULL,
    "Balance" decimal(18,2) NOT NULL,
    "AvailableBalance" decimal(18,2) NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NOT NULL,
    "IsActive" INTEGER NOT NULL,
    CONSTRAINT "FK_Accounts_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE RESTRICT
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.722 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserClaims" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_AspNetUserClaims" PRIMARY KEY AUTOINCREMENT,
    "UserId" TEXT NOT NULL,
    "ClaimType" TEXT NULL,
    "ClaimValue" TEXT NULL,
    CONSTRAINT "FK_AspNetUserClaims_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.725 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserLogins" (
    "LoginProvider" TEXT NOT NULL,
    "ProviderKey" TEXT NOT NULL,
    "ProviderDisplayName" TEXT NULL,
    "UserId" TEXT NOT NULL,
    CONSTRAINT "PK_AspNetUserLogins" PRIMARY KEY ("LoginProvider", "ProviderKey"),
    CONSTRAINT "FK_AspNetUserLogins_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.728 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserRoles" (
    "UserId" TEXT NOT NULL,
    "RoleId" TEXT NOT NULL,
    CONSTRAINT "PK_AspNetUserRoles" PRIMARY KEY ("UserId", "RoleId"),
    CONSTRAINT "FK_AspNetUserRoles_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_AspNetUserRoles_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.732 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AspNetUserTokens" (
    "UserId" TEXT NOT NULL,
    "LoginProvider" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Value" TEXT NULL,
    CONSTRAINT "PK_AspNetUserTokens" PRIMARY KEY ("UserId", "LoginProvider", "Name"),
    CONSTRAINT "FK_AspNetUserTokens_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers" ("Id") ON DELETE CASCADE
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.734 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Transactions" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Transactions" PRIMARY KEY AUTOINCREMENT,
    "TransactionId" TEXT NOT NULL,
    "FromAccountId" INTEGER NULL,
    "ToAccountId" INTEGER NULL,
    "Amount" decimal(18,2) NOT NULL,
    "TransactionType" TEXT NOT NULL,
    "Description" TEXT NOT NULL,
    "Status" TEXT NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "ProcessedAt" TEXT NOT NULL,
    CONSTRAINT "FK_Transactions_Accounts_FromAccountId" FOREIGN KEY ("FromAccountId") REFERENCES "Accounts" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_Transactions_Accounts_ToAccountId" FOREIGN KEY ("ToAccountId") REFERENCES "Accounts" ("Id") ON DELETE RESTRICT
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.737 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Accounts_AccountNumber" ON "Accounts" ("AccountNumber"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.740 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Accounts_UserId" ON "Accounts" ("UserId"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.743 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetRoleClaims_RoleId" ON "AspNetRoleClaims" ("RoleId"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.746 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "RoleNameIndex" ON "AspNetRoles" ("NormalizedName"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.748 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserClaims_UserId" ON "AspNetUserClaims" ("UserId"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.751 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserLogins_UserId" ON "AspNetUserLogins" ("UserId"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.755 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AspNetUserRoles_RoleId" ON "AspNetUserRoles" ("RoleId"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.759 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "EmailIndex" ON "AspNetUsers" ("NormalizedEmail"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.763 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_AspNetUsers_IdNumber" ON "AspNetUsers" ("IdNumber"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.766 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "UserNameIndex" ON "AspNetUsers" ("NormalizedUserName"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.768 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Transactions_FromAccountId" ON "Transactions" ("FromAccountId"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.771 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Transactions_ToAccountId" ON "Transactions" ("ToAccountId"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.774 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Transactions_TransactionId" ON "Transactions" ("TransactionId"); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.781 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250817005204_InitialCreate', '9.0.8'); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 10:52:19.811 +10:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:37:59.856 +10:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. <s:Microsoft.EntityFrameworkCore.Migrations>
[2025-08-17 13:38:00.036 +10:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:00.073 +10:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-08-17 03:38:00.0473539+00:00');
SELECT changes(); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:00.199 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:00.213 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:00.219 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:00.254 +10:00 [INF] Applying migration '20250817033746_AddAccountNameAndLastLogin'. <s:Microsoft.EntityFrameworkCore.Migrations>
[2025-08-17 13:38:00.287 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "AspNetUsers" ADD "LastLoginAt" TEXT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:00.290 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Accounts" ADD "AccountName" TEXT NOT NULL DEFAULT ''; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:00.293 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250817033746_AddAccountNameAndLastLogin', '9.0.8'); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:00.326 +10:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:11.041 +10:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts <s:Microsoft.AspNetCore.Mvc.Infrastructure.DefaultActionDescriptorCollectionProvider>
[2025-08-17 13:38:12.370 +10:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 13:38:12.385 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 13:38:12.390 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 13:38:12.419 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 13:38:12.490 +10:00 [INF] Creating key {defdffbb-9116-4ed2-884f-d2e34ee540cd} with creation date 2025-08-17 03:38:12Z, activation date 2025-08-17 03:38:12Z, and expiration date 2025-11-15 03:38:12Z. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 13:38:12.527 +10:00 [WRN] No XML encryptor configured. Key {defdffbb-9116-4ed2-884f-d2e34ee540cd} may be persisted to storage in unencrypted form. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 13:38:12.539 +10:00 [INF] Writing data to file '/root/.aspnet/DataProtection-Keys/key-defdffbb-9116-4ed2-884f-d2e34ee540cd.xml'. <s:Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository>
[2025-08-17 13:38:12.687 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 13:38:12.693 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 13:38:12.696 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 13:38:12.699 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 13:40:18.322 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 14:18:20.998 +10:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 14:18:21.109 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 14:18:21.721 +10:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 14:18:21.758 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 14:18:22.017 +10:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (Size = 36), @p1='?', @p2='?' (Size = 5), @p3='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("Id", "ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2, @p3); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 14:18:22.030 +10:00 [INF] Created role: Admin <s:>
[2025-08-17 14:18:22.034 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 14:18:22.041 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 14:18:22.062 +10:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 36), @p1='?', @p2='?' (Size = 8), @p3='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetRoles" ("Id", "ConcurrencyStamp", "Name", "NormalizedName")
VALUES (@p0, @p1, @p2, @p3); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 14:18:22.067 +10:00 [INF] Created role: Customer <s:>
[2025-08-17 14:18:22.070 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 14:18:22.081 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 14:18:22.111 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 14:18:22.293 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 14:18:22.299 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 14:18:22.303 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 14:18:22.305 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 14:18:51.174 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.265 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger - 301 0 null 92.1413ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.289 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.html - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.464 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.html - 200 null text/html;charset=utf-8 175.6031ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.519 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui.css - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.540 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.css - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.555 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui-bundle.js - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.571 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui-standalone-preset.js - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.583 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.css - 200 202 text/css 43.8141ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.588 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.js - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.595 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.js - 200 null application/javascript;charset=utf-8 7.648ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.661 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 89.6265ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.661 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui.css - 200 155175 text/css 142.1172ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:51.699 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui-bundle.js - 200 1485750 text/javascript 143.5669ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:52.115 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:52.181 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/favicon-32x32.png - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:52.187 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/favicon-32x32.png - 200 628 image/png 5.8731ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 14:18:52.378 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 263.5779ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:10:42.750 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/Auth/register - application/json 151 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:10:42.765 +10:00 [INF] CORS policy execution failed. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:10:42.767 +10:00 [INF] Request origin http://localhost:5255 does not have permission to access the resource. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:10:42.777 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 15:10:42.830 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:10:42.857 +10:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BankingSystem.API.Controllers.RegisterRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:10:42.949 +10:00 [INF] Registration attempt for email: modingshuo@gmail.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 15:10:42.996 +10:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.124 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.129 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.261 +10:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (DbType = Int32), @p2='?', @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (Size = 20), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (Size = 6), @p10='?', @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime), @p13='?' (Size = 2), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (DbType = DateTime), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (Size = 84), @p20='?' (Size = 10), @p21='?' (DbType = Boolean), @p22='?' (Size = 32), @p23='?' (DbType = Boolean), @p24='?' (DbType = DateTime), @p25='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("Id", "AccessFailedCount", "Address", "ConcurrencyStamp", "CreatedAt", "DateOfBirth", "Email", "EmailConfirmed", "FailedLoginAttempts", "FirstName", "IdNumber", "IsActive", "LastLoginAt", "LastName", "LockoutEnabled", "LockoutEnd", "LockoutEndTime", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "SecurityStamp", "TwoFactorEnabled", "UpdatedAt", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.281 +10:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.327 +10:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 36), @__p_1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."UserId", "a"."RoleId"
FROM "AspNetUserRoles" AS "a"
WHERE "a"."UserId" = @__p_0 AND "a"."RoleId" = @__p_1
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.332 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedRoleName_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.351 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.353 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.392 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUserRoles" ("RoleId", "UserId")
VALUES (@p0, @p1); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.399 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p25='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?', @p2='?' (Size = 36), @p26='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?', @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (Size = 2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (DbType = DateTime), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 84), @p19='?' (Size = 10), @p20='?' (DbType = Boolean), @p21='?' (Size = 32), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTime), @p24='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Address" = @p1, "ConcurrencyStamp" = @p2, "CreatedAt" = @p3, "DateOfBirth" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "FailedLoginAttempts" = @p7, "FirstName" = @p8, "IdNumber" = @p9, "IsActive" = @p10, "LastLoginAt" = @p11, "LastName" = @p12, "LockoutEnabled" = @p13, "LockoutEnd" = @p14, "LockoutEndTime" = @p15, "NormalizedEmail" = @p16, "NormalizedUserName" = @p17, "PasswordHash" = @p18, "PhoneNumber" = @p19, "PhoneNumberConfirmed" = @p20, "SecurityStamp" = @p21, "TwoFactorEnabled" = @p22, "UpdatedAt" = @p23, "UserName" = @p24
WHERE "Id" = @p25 AND "ConcurrencyStamp" = @p26
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.471 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:10:43.501 +10:00 [INF] User registered successfully: 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 15:10:43.512 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AuthResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 15:10:43.533 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API) in 668.8647ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:10:43.534 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:10:43.541 +10:00 [INF] HTTP POST /api/Auth/register responded 200 in 709.7823 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 15:10:43.549 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/Auth/register - 200 null application/json; charset=utf-8 799.1256ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:12:55.713 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:12:55.730 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:12:55.738 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:12:55.739 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Auth/profile - 401 0 null 26.6678ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:13:24.695 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:13:24.700 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:13:24.702 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:13:24.703 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Auth/profile - 401 0 null 7.3602ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:13:26.830 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:13:26.834 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:13:26.835 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:13:26.836 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Auth/profile - 401 0 null 5.2545ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:14:16.866 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:14:16.867 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:14:16.868 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:14:16.869 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Auth/profile - 401 0 null 2.2903ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:15:08.272 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:15:08.275 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:15:08.276 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:15:08.277 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Auth/profile - 401 0 null 5.3181ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:16:09.377 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:16:09.380 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:16:09.381 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:16:09.382 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Auth/profile - 401 0 null 4.7002ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:16:13.505 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:16:13.507 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:16:13.508 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:16:13.509 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/auth/profile - 401 0 null 3.7157ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:17:55.668 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/Auth/login - application/json 75 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:17:55.671 +10:00 [INF] CORS policy execution failed. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:17:55.672 +10:00 [INF] Request origin http://localhost:5255 does not have permission to access the resource. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:17:55.673 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:17:55.681 +10:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankingSystem.API.Controllers.LoginRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:17:55.719 +10:00 [INF] Login attempt for email: modingshuo@gmail.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 15:17:55.803 +10:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:17:55.917 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:17:55.919 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:17:55.921 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p25='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?', @p2='?' (Size = 36), @p26='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?', @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (Size = 2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (DbType = DateTime), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 84), @p19='?' (Size = 10), @p20='?' (DbType = Boolean), @p21='?' (Size = 32), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTime), @p24='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Address" = @p1, "ConcurrencyStamp" = @p2, "CreatedAt" = @p3, "DateOfBirth" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "FailedLoginAttempts" = @p7, "FirstName" = @p8, "IdNumber" = @p9, "IsActive" = @p10, "LastLoginAt" = @p11, "LastName" = @p12, "LockoutEnabled" = @p13, "LockoutEnd" = @p14, "LockoutEndTime" = @p15, "NormalizedEmail" = @p16, "NormalizedUserName" = @p17, "PasswordHash" = @p18, "PhoneNumber" = @p19, "PhoneNumberConfirmed" = @p20, "SecurityStamp" = @p21, "TwoFactorEnabled" = @p22, "UpdatedAt" = @p23, "UserName" = @p24
WHERE "Id" = @p25 AND "ConcurrencyStamp" = @p26
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:17:55.952 +10:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:17:55.953 +10:00 [INF] User logged in successfully: 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 15:17:55.954 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AuthResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 15:17:55.956 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API) in 272.9975ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:17:55.957 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:17:55.958 +10:00 [INF] HTTP POST /api/Auth/login responded 200 in 284.2015 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 15:17:55.961 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/Auth/login - 200 null application/json; charset=utf-8 292.7164ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:18:13.391 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:18:13.393 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:18:13.393 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:18:13.394 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Auth/profile - 401 0 null 2.5036ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:18:21.733 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:18:21.735 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:18:21.736 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:18:21.736 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Auth/profile - 401 0 null 3.6041ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:19:32.209 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:20:05.391 +10:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:20:05.513 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 15:20:06.162 +10:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:20:06.274 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 15:20:06.279 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:20:06.283 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 15:20:06.284 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 15:20:06.289 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 15:20:06.320 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 15:20:06.491 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:20:06.497 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:20:06.500 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:20:06.501 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:20:08.607 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.html - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:20:08.783 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.html - 200 null text/html;charset=utf-8 176.9471ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:20:09.079 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:20:09.238 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 159.6545ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:21:04.687 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/login - application/json 75 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:21:04.696 +10:00 [INF] CORS policy execution failed. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:21:04.698 +10:00 [INF] Request origin http://localhost:5255 does not have permission to access the resource. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:21:04.701 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 15:21:04.735 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:21:04.754 +10:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankingSystem.API.Controllers.LoginRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:21:04.823 +10:00 [INF] Login attempt for email: modingshuo@gmail.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 15:21:04.856 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:21:05.040 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:21:05.046 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:21:05.147 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p25='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?', @p2='?' (Size = 36), @p26='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?', @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (Size = 2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (DbType = DateTime), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 84), @p19='?' (Size = 10), @p20='?' (DbType = Boolean), @p21='?' (Size = 32), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTime), @p24='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Address" = @p1, "ConcurrencyStamp" = @p2, "CreatedAt" = @p3, "DateOfBirth" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "FailedLoginAttempts" = @p7, "FirstName" = @p8, "IdNumber" = @p9, "IsActive" = @p10, "LastLoginAt" = @p11, "LastName" = @p12, "LockoutEnabled" = @p13, "LockoutEnd" = @p14, "LockoutEndTime" = @p15, "NormalizedEmail" = @p16, "NormalizedUserName" = @p17, "PasswordHash" = @p18, "PhoneNumber" = @p19, "PhoneNumberConfirmed" = @p20, "SecurityStamp" = @p21, "TwoFactorEnabled" = @p22, "UpdatedAt" = @p23, "UserName" = @p24
WHERE "Id" = @p25 AND "ConcurrencyStamp" = @p26
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:21:05.212 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:21:05.231 +10:00 [INF] User logged in successfully: 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 15:21:05.238 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AuthResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 15:21:05.253 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API) in 495.7894ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:21:05.254 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:21:05.256 +10:00 [INF] HTTP POST /api/auth/login responded 200 in 521.0257 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 15:21:05.263 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/login - 200 null application/json; charset=utf-8 576.1551ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:22:07.592 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:22:07.607 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:22:07.622 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:22:07.624 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/auth/profile - 401 0 null 31.223ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:22:59.002 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:22:59.008 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 15:22:59.009 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 15:22:59.009 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/auth/profile - 401 0 null 7.228ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:24:00.899 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:24:23.040 +10:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:24:23.163 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 15:24:23.857 +10:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:24:23.941 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 15:24:23.947 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:24:23.949 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 15:24:23.950 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 15:24:23.958 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 15:24:23.983 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 15:24:24.130 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:24:24.137 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:24:24.139 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:24:24.141 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 15:24:32.358 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.html - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:24:32.486 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.html - 200 null text/html;charset=utf-8 128.692ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:24:32.717 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:24:32.839 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 122.4246ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:25:02.964 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/login - application/json 61 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:25:02.981 +10:00 [INF] CORS policy execution failed. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:25:02.982 +10:00 [INF] Request origin http://localhost:5255 does not have permission to access the resource. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:25:02.984 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 15:25:03.011 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:25:03.029 +10:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankingSystem.API.Controllers.LoginRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:25:03.099 +10:00 [INF] Login attempt for email: modingshuo@gmail.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 15:25:03.129 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:03.309 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:03.315 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:03.417 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p25='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?', @p2='?' (Size = 36), @p26='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?', @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (Size = 2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (DbType = DateTime), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 84), @p19='?' (Size = 10), @p20='?' (DbType = Boolean), @p21='?' (Size = 32), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTime), @p24='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Address" = @p1, "ConcurrencyStamp" = @p2, "CreatedAt" = @p3, "DateOfBirth" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "FailedLoginAttempts" = @p7, "FirstName" = @p8, "IdNumber" = @p9, "IsActive" = @p10, "LastLoginAt" = @p11, "LastName" = @p12, "LockoutEnabled" = @p13, "LockoutEnd" = @p14, "LockoutEndTime" = @p15, "NormalizedEmail" = @p16, "NormalizedUserName" = @p17, "PasswordHash" = @p18, "PhoneNumber" = @p19, "PhoneNumberConfirmed" = @p20, "SecurityStamp" = @p21, "TwoFactorEnabled" = @p22, "UpdatedAt" = @p23, "UserName" = @p24
WHERE "Id" = @p25 AND "ConcurrencyStamp" = @p26
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:03.445 +10:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'BankingSystem.API.Controllers.ErrorResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 15:25:03.458 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API) in 424.1844ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:25:03.459 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:25:03.461 +10:00 [INF] HTTP POST /api/auth/login responded 401 in 450.5084 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 15:25:03.466 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/login - 401 null application/json; charset=utf-8 502.2914ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:25:20.251 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/login - application/json 75 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:25:20.254 +10:00 [INF] CORS policy execution failed. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:25:20.255 +10:00 [INF] Request origin http://localhost:5255 does not have permission to access the resource. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 15:25:20.257 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:25:20.258 +10:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankingSystem.API.Controllers.LoginRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:25:20.272 +10:00 [INF] Login attempt for email: modingshuo@gmail.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 15:25:20.331 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:20.427 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:20.429 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:20.432 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p25='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?', @p2='?' (Size = 36), @p26='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?', @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (Size = 2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (DbType = DateTime), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 84), @p19='?' (Size = 10), @p20='?' (DbType = Boolean), @p21='?' (Size = 32), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTime), @p24='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Address" = @p1, "ConcurrencyStamp" = @p2, "CreatedAt" = @p3, "DateOfBirth" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "FailedLoginAttempts" = @p7, "FirstName" = @p8, "IdNumber" = @p9, "IsActive" = @p10, "LastLoginAt" = @p11, "LastName" = @p12, "LockoutEnabled" = @p13, "LockoutEnd" = @p14, "LockoutEndTime" = @p15, "NormalizedEmail" = @p16, "NormalizedUserName" = @p17, "PasswordHash" = @p18, "PhoneNumber" = @p19, "PhoneNumberConfirmed" = @p20, "SecurityStamp" = @p21, "TwoFactorEnabled" = @p22, "UpdatedAt" = @p23, "UserName" = @p24
WHERE "Id" = @p25 AND "ConcurrencyStamp" = @p26
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:20.443 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:20.444 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:20.446 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p25='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?', @p2='?' (Size = 36), @p26='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?', @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (Size = 2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (DbType = DateTime), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 84), @p19='?' (Size = 10), @p20='?' (DbType = Boolean), @p21='?' (Size = 32), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTime), @p24='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Address" = @p1, "ConcurrencyStamp" = @p2, "CreatedAt" = @p3, "DateOfBirth" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "FailedLoginAttempts" = @p7, "FirstName" = @p8, "IdNumber" = @p9, "IsActive" = @p10, "LastLoginAt" = @p11, "LastName" = @p12, "LockoutEnabled" = @p13, "LockoutEnd" = @p14, "LockoutEndTime" = @p15, "NormalizedEmail" = @p16, "NormalizedUserName" = @p17, "PasswordHash" = @p18, "PhoneNumber" = @p19, "PhoneNumberConfirmed" = @p20, "SecurityStamp" = @p21, "TwoFactorEnabled" = @p22, "UpdatedAt" = @p23, "UserName" = @p24
WHERE "Id" = @p25 AND "ConcurrencyStamp" = @p26
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:20.502 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:25:20.523 +10:00 [INF] User logged in successfully: 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 15:25:20.526 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AuthResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 15:25:20.533 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API) in 273.3507ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:25:20.533 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:25:20.534 +10:00 [INF] HTTP POST /api/auth/login responded 200 in 276.5940 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 15:25:20.535 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/login - 200 null application/json; charset=utf-8 284.1907ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:26:01.678 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 15:26:01.730 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.GetProfile (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:26:01.734 +10:00 [INF] Route matched with {action = "GetProfile", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:26:01.769 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."Id" = @__p_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 15:26:01.770 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.UserInfo'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 15:26:01.771 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.GetProfile (BankingSystem.API) in 35.8374ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 15:26:01.771 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.GetProfile (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 15:26:01.772 +10:00 [INF] HTTP GET /api/auth/profile responded 200 in 41.9018 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 15:26:01.773 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/auth/profile - 200 null application/json; charset=utf-8 94.6885ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:33:03.567 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 17:47:00.541 +10:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:47:00.630 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 17:47:01.046 +10:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:47:01.145 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 17:47:01.152 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:47:01.156 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 17:47:01.157 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 17:47:01.162 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 17:47:01.180 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 17:47:01.362 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 17:47:01.367 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 17:47:01.369 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 17:47:01.371 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 17:48:17.955 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.107 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger - 301 0 null 154.303ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.125 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.html - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.236 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.html - 200 null text/html;charset=utf-8 111.4207ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.292 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui.css - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.292 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.css - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.300 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui-bundle.js - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.307 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.js - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.312 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui-standalone-preset.js - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.313 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.js - 200 null application/javascript;charset=utf-8 5.6474ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.326 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.css - 200 202 text/css 33.4819ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.371 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 59.4171ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.371 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui.css - 200 155175 text/css 79.7431ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.429 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui-bundle.js - 200 1485750 text/javascript 128.9714ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.717 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.773 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/favicon-32x32.png - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.776 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/favicon-32x32.png - 200 628 image/png 3.8049ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:48:18.933 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 216.7286ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:50:15.959 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/login - application/json 75 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:50:15.973 +10:00 [INF] CORS policy execution failed. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 17:50:15.975 +10:00 [INF] Request origin http://localhost:5255 does not have permission to access the resource. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 17:50:15.981 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 17:50:16.007 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:50:16.029 +10:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankingSystem.API.Controllers.LoginRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:50:16.099 +10:00 [INF] Login attempt for email: modingshuo@gmail.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 17:50:16.128 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:50:16.312 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:50:16.318 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:50:16.416 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p25='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?', @p2='?' (Size = 36), @p26='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?', @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (Size = 2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (DbType = DateTime), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 84), @p19='?' (Size = 10), @p20='?' (DbType = Boolean), @p21='?' (Size = 32), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTime), @p24='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Address" = @p1, "ConcurrencyStamp" = @p2, "CreatedAt" = @p3, "DateOfBirth" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "FailedLoginAttempts" = @p7, "FirstName" = @p8, "IdNumber" = @p9, "IsActive" = @p10, "LastLoginAt" = @p11, "LastName" = @p12, "LockoutEnabled" = @p13, "LockoutEnd" = @p14, "LockoutEndTime" = @p15, "NormalizedEmail" = @p16, "NormalizedUserName" = @p17, "PasswordHash" = @p18, "PhoneNumber" = @p19, "PhoneNumberConfirmed" = @p20, "SecurityStamp" = @p21, "TwoFactorEnabled" = @p22, "UpdatedAt" = @p23, "UserName" = @p24
WHERE "Id" = @p25 AND "ConcurrencyStamp" = @p26
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:50:16.469 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:50:16.488 +10:00 [INF] User logged in successfully: 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 17:50:16.496 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AuthResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 17:50:16.511 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API) in 477.4481ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:50:16.512 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:50:16.514 +10:00 [INF] HTTP POST /api/auth/login responded 200 in 506.8418 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 17:50:16.518 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/login - 200 null application/json; charset=utf-8 559.6283ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:50:49.494 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:50:49.549 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.GetProfile (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:50:49.555 +10:00 [INF] Route matched with {action = "GetProfile", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile() on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:50:49.633 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."Id" = @__p_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:50:49.636 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.UserInfo'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 17:50:49.637 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.GetProfile (BankingSystem.API) in 81.9062ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:50:49.638 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.GetProfile (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:50:49.638 +10:00 [INF] HTTP GET /api/auth/profile responded 200 in 89.9028 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 17:50:49.640 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/auth/profile - 200 null application/json; charset=utf-8 145.9794ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:51:24.955 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/Account/create - application/json 83 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:51:24.959 +10:00 [INF] CORS policy execution failed. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 17:51:24.960 +10:00 [INF] Request origin http://localhost:5255 does not have permission to access the resource. <s:Microsoft.AspNetCore.Cors.Infrastructure.CorsService>
[2025-08-17 17:51:24.975 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.CreateAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:51:24.981 +10:00 [INF] Route matched with {action = "CreateAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAccount(BankingSystem.API.Controllers.CreateAccountRequest) on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:51:24.995 +10:00 [INF] Creating account for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 17:51:25.064 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 6), @p1='?' (Size = 10), @p2='?' (Size = 7), @p3='?' (DbType = Decimal), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime), @p8='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Accounts" ("AccountName", "AccountNumber", "AccountType", "AvailableBalance", "Balance", "CreatedAt", "IsActive", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:51:25.088 +10:00 [INF] Account created successfully for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 with account number 0010817075 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 17:51:25.120 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt", "a0"."UserName"
FROM "Accounts" AS "a"
INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:51:25.135 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "Balance" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:51:25.146 +10:00 [INF] Balance updated for account 1 to 1000 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 17:51:25.149 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt", "a0"."UserName"
FROM "Accounts" AS "a"
INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:51:25.149 +10:00 [INF] Account created successfully with ID 1 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 17:51:25.151 +10:00 [INF] Executing CreatedAtActionResult, writing value of type 'BankingSystem.API.Controllers.AccountResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 17:51:25.176 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.CreateAccount (BankingSystem.API) in 193.8009ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:51:25.177 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.CreateAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:51:25.177 +10:00 [INF] HTTP POST /api/Account/create responded 201 in 202.7486 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 17:51:25.179 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/Account/create - 201 null application/json; charset=utf-8 223.7534ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:52:33.389 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/Account/create - application/json 83 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:52:33.392 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.CreateAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:52:33.393 +10:00 [INF] Route matched with {action = "CreateAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAccount(BankingSystem.API.Controllers.CreateAccountRequest) on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:52:33.396 +10:00 [INF] Creating account for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 17:52:33.399 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 6), @p1='?' (Size = 10), @p2='?' (Size = 7), @p3='?' (DbType = Decimal), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime), @p8='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Accounts" ("AccountName", "AccountNumber", "AccountType", "AvailableBalance", "Balance", "CreatedAt", "IsActive", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:52:33.404 +10:00 [INF] Account created successfully for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 with account number 0010817073 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 17:52:33.406 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt", "a0"."UserName"
FROM "Accounts" AS "a"
INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:52:33.408 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "Balance" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:52:33.413 +10:00 [INF] Balance updated for account 2 to 1000 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 17:52:33.414 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt", "a0"."UserName"
FROM "Accounts" AS "a"
INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:52:33.415 +10:00 [INF] Account created successfully with ID 2 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 17:52:33.416 +10:00 [INF] Executing CreatedAtActionResult, writing value of type 'BankingSystem.API.Controllers.AccountResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 17:52:33.417 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.CreateAccount (BankingSystem.API) in 23.4261ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:52:33.418 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.CreateAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:52:33.418 +10:00 [INF] HTTP POST /api/Account/create responded 201 in 26.1290 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 17:52:33.419 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/Account/create - 201 null application/json; charset=utf-8 30.4125ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:53:37.249 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Account/list - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:53:37.252 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.GetUserAccounts (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:53:37.260 +10:00 [INF] Route matched with {action = "GetUserAccounts", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserAccounts() on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:53:37.264 +10:00 [INF] Retrieving accounts for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 17:53:37.281 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."UserId" = @__userId_0
ORDER BY "a"."CreatedAt" DESC <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:53:37.285 +10:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.Collections.Generic.List`1[[BankingSystem.API.Controllers.AccountResponse, BankingSystem.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 17:53:37.300 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.GetUserAccounts (BankingSystem.API) in 39.1959ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:53:37.301 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.GetUserAccounts (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:53:37.302 +10:00 [INF] HTTP GET /api/Account/list responded 200 in 49.9364 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 17:53:37.302 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Account/list - 200 null application/json; charset=utf-8 53.1896ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:53:58.041 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Account/2 - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:53:58.046 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:53:58.051 +10:00 [INF] Route matched with {action = "GetAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAccount(Int32) on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:53:58.055 +10:00 [INF] Retrieving account 2 for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 17:53:58.061 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt", "a0"."UserName"
FROM "Accounts" AS "a"
INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:53:58.066 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AccountDetailResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 17:53:58.080 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API) in 28.1546ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:53:58.080 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:53:58.081 +10:00 [INF] HTTP GET /api/Account/2 responded 200 in 34.8838 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 17:53:58.082 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Account/2 - 200 null application/json; charset=utf-8 40.2278ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:54:10.818 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Account/2/balance - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 17:54:10.821 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.GetAccountBalance (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:54:10.833 +10:00 [INF] Route matched with {action = "GetAccountBalance", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAccountBalance(Int32) on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:54:10.837 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt", "a0"."UserName"
FROM "Accounts" AS "a"
INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:54:10.854 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 17:54:10.860 +10:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 17:54:10.868 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.GetAccountBalance (BankingSystem.API) in 34.3308ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 17:54:10.870 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.GetAccountBalance (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 17:54:10.872 +10:00 [INF] HTTP GET /api/Account/2/balance responded 200 in 51.3229 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 17:54:10.874 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Account/2/balance - 200 null application/json; charset=utf-8 55.9828ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 18:00:06.010 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 18:00:51.379 +10:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 18:00:51.569 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 18:00:52.341 +10:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 18:00:52.482 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 18:00:52.488 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 18:00:52.493 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 18:00:52.495 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 18:00:52.505 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 18:00:52.537 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 18:00:52.727 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 18:00:52.735 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 18:00:52.738 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 18:00:52.740 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 18:01:15.196 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/Account/create - application/json 95 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 18:01:15.242 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 18:01:15.336 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.CreateAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 18:01:15.355 +10:00 [INF] Route matched with {action = "CreateAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAccount(BankingSystem.API.Controllers.CreateAccountRequest) on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 18:01:15.441 +10:00 [INF] Creating account for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 18:01:15.595 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 18), @p1='?' (Size = 10), @p2='?' (Size = 8), @p3='?' (DbType = Decimal), @p4='?' (DbType = Decimal), @p5='?' (DbType = DateTime), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime), @p8='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Accounts" ("AccountName", "AccountNumber", "AccountType", "AvailableBalance", "Balance", "CreatedAt", "IsActive", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 18:01:15.629 +10:00 [INF] Account created successfully for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 with account number 0010817084 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 18:01:15.708 +10:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. <s:Microsoft.EntityFrameworkCore.Query>
[2025-08-17 18:01:15.736 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 18:01:15.831 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "AvailableBalance" = @p0, "Balance" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 18:01:15.837 +10:00 [INF] Balance updated for account 3 to 500 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 18:01:15.842 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 18:01:15.845 +10:00 [INF] Account created successfully with ID 3 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 18:01:15.856 +10:00 [INF] Executing CreatedAtActionResult, writing value of type 'BankingSystem.API.Controllers.AccountResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 18:01:15.905 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.CreateAccount (BankingSystem.API) in 546.103ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 18:01:15.911 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.CreateAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 18:01:15.914 +10:00 [INF] HTTP POST /api/Account/create responded 201 in 577.1936 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 18:01:15.922 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/Account/create - 201 null application/json; charset=utf-8 726.5117ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:38:21.942 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:41:04.753 +10:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:41:04.933 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 20:41:05.730 +10:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:41:05.861 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 20:41:05.870 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:41:05.874 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 20:41:05.876 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 20:41:05.886 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 20:41:05.914 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 20:41:06.120 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:41:06.127 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:41:06.130 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:41:06.134 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:41:44.676 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/Transaction/deposit - application/json 70 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:41:44.733 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 20:41:44.821 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 20:41:44.841 +10:00 [INF] Route matched with {action = "Deposit", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Deposit(BankingSystem.API.Controllers.DepositRequest) on controller BankingSystem.API.Controllers.TransactionController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 20:41:44.938 +10:00 [INF] Processing deposit for account 3 by user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 20:41:45.032 +10:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. <s:Microsoft.EntityFrameworkCore.Query>
[2025-08-17 20:41:45.063 +10:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:41:45.179 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:41:45.192 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:41:45.196 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:41:45.296 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "AvailableBalance" = @p0, "Balance" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:41:45.307 +10:00 [INF] Balance updated for account 3 to 700 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 20:41:45.316 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.Data.Services.TransactionService>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 81
[2025-08-17 20:41:45.330 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.API.Controllers.TransactionController>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 81
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 94
   at BankingSystem.API.Controllers.TransactionController.Deposit(DepositRequest request) in /root/projects/banksys/backend/BankingSystem.API/Controllers/TransactionController.cs:line 66
[2025-08-17 20:41:45.340 +10:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 20:41:45.366 +10:00 [INF] Executed action BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API) in 521.051ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 20:41:45.371 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 20:41:45.374 +10:00 [ERR] HTTP POST /api/Transaction/deposit responded 500 in 552.9264 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 20:41:45.383 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/Transaction/deposit - 500 null application/json; charset=utf-8 709.2733ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:42:39.030 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Account/3 - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:42:39.048 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 20:42:39.060 +10:00 [INF] Route matched with {action = "GetAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAccount(Int32) on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 20:42:39.068 +10:00 [INF] Retrieving account 3 for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 20:42:39.139 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:42:39.144 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AccountDetailResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 20:42:39.165 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API) in 103.9874ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 20:42:39.166 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 20:42:39.167 +10:00 [INF] HTTP GET /api/Account/3 responded 200 in 118.7993 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 20:42:39.168 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Account/3 - 200 null application/json; charset=utf-8 137.6331ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:45:01.646 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:48:49.911 +10:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:48:50.052 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 20:48:50.621 +10:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:48:50.764 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 20:48:50.770 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:48:50.777 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 20:48:50.779 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 20:48:50.784 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 20:48:50.818 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 20:48:51.002 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:48:51.008 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:48:51.011 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:48:51.013 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:49:09.097 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/Transaction/deposit - application/json 70 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:49:09.151 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 20:49:09.206 +10:00 [INF] Failed to validate the token. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'p6Yctb6I4JHRVNoV9PX-lbJoKn_QHuXQwn0C25jqqXU'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-08-17 20:49:09.218 +10:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'p6Yctb6I4JHRVNoV9PX-lbJoKn_QHuXQwn0C25jqqXU'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 20:49:09.228 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 20:49:09.240 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 20:49:09.247 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/Transaction/deposit - 401 0 null 151.2243ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:49:49.771 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/Transaction/deposit - application/json 70 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:49:49.783 +10:00 [INF] Failed to validate the token. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'p6Yctb6I4JHRVNoV9PX-lbJoKn_QHuXQwn0C25jqqXU'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-08-17 20:49:49.786 +10:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'p6Yctb6I4JHRVNoV9PX-lbJoKn_QHuXQwn0C25jqqXU'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 20:49:49.791 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 20:49:49.793 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 20:49:49.796 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/Transaction/deposit - 401 0 null 24.7678ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:51:55.507 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/auth/profile - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:51:55.521 +10:00 [INF] Failed to validate the token. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'p6Yctb6I4JHRVNoV9PX-lbJoKn_QHuXQwn0C25jqqXU'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-08-17 20:51:55.523 +10:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'p6Yctb6I4JHRVNoV9PX-lbJoKn_QHuXQwn0C25jqqXU'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 20:51:55.525 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 20:51:55.526 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 20:51:55.526 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/auth/profile - 401 0 null 19.4505ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:52:18.250 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:53:49.671 +10:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:53:49.767 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:19.096 +10:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. <s:Microsoft.EntityFrameworkCore.Migrations>
[2025-08-17 20:54:19.252 +10:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:19.279 +10:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-08-17 10:54:19.2615421+00:00');
SELECT changes(); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:19.372 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:19.381 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:19.388 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:19.418 +10:00 [INF] Applying migration '20250817105404_AddTransactionTable'. <s:Microsoft.EntityFrameworkCore.Migrations>
[2025-08-17 20:54:19.443 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250817105404_AddTransactionTable', '9.0.8'); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:19.476 +10:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:27.943 +10:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:28.079 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 20:54:28.678 +10:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:28.804 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 20:54:28.810 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:54:28.813 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 20:54:28.815 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 20:54:28.821 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 20:54:28.867 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 20:54:29.039 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:54:29.045 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:54:29.050 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:54:29.053 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:54:32.444 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.html - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:54:32.585 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.html - 200 null text/html;charset=utf-8 141.6416ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:58:59.185 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
 CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:55:14.400 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:55:49.647 +10:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long. <s:Microsoft.EntityFrameworkCore.Migrations>
[2025-08-17 20:55:49.814 +10:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:55:49.859 +10:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-08-17 10:55:49.8250411+00:00');
SELECT changes(); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:55:49.958 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:55:49.969 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table'; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:55:49.974 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:55:49.994 +10:00 [INF] No migrations were applied. The database is already up to date. <s:Microsoft.EntityFrameworkCore.Migrations>
[2025-08-17 20:55:50.009 +10:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:59:07.024 +10:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:59:07.164 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 20:59:07.707 +10:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:59:07.845 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 20:59:07.855 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 20:59:07.857 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 20:59:07.858 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 20:59:07.868 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 20:59:07.899 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 20:59:08.054 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:59:08.060 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:59:08.062 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:59:08.064 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 20:59:55.863 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/Account/list - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 20:59:55.911 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 20:59:55.973 +10:00 [INF] Failed to validate the token. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'p6Yctb6I4JHRVNoV9PX-lbJoKn_QHuXQwn0C25jqqXU'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
[2025-08-17 20:59:55.987 +10:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'p6Yctb6I4JHRVNoV9PX-lbJoKn_QHuXQwn0C25jqqXU'. , KeyId: 
'.
Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'.
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 20:59:55.995 +10:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user. <s:Microsoft.AspNetCore.Authorization.DefaultAuthorizationService>
[2025-08-17 20:59:56.000 +10:00 [INF] AuthenticationScheme: Bearer was challenged. <s:Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler>
[2025-08-17 20:59:56.006 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/Account/list - 401 0 null 145.5116ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:00:22.833 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/login - application/json 56 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:00:22.852 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:00:22.890 +10:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankingSystem.API.Controllers.LoginRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:00:22.996 +10:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:00:23.044 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API) in 149.6307ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:00:23.044 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:00:23.047 +10:00 [INF] HTTP POST /api/auth/login responded 400 in 198.5325 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:00:23.050 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/login - 400 null application/json; charset=utf-8 217.4585ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:01:05.101 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/login - application/json 61 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:01:05.110 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:01:05.111 +10:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankingSystem.API.Controllers.LoginRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:01:05.128 +10:00 [INF] Login attempt for email: test@example.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 21:01:05.175 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:01:05.179 +10:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'BankingSystem.API.Controllers.ErrorResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:01:05.186 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API) in 74.2991ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:01:05.187 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:01:05.187 +10:00 [INF] HTTP POST /api/auth/login responded 401 in 77.6499 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:01:05.198 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/login - 401 null application/json; charset=utf-8 96.3931ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:01:23.604 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/register - application/json 126 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:01:23.607 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:01:23.630 +10:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BankingSystem.API.Controllers.RegisterRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:01:23.691 +10:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:01:23.693 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API) in 61.4469ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:01:23.695 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:01:23.698 +10:00 [INF] HTTP POST /api/auth/register responded 400 in 91.3481 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:01:23.701 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/register - 400 null application/json; charset=utf-8 96.1543ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:01:47.870 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/register - application/json 171 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:01:47.875 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:01:47.879 +10:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BankingSystem.API.Controllers.RegisterRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:01:47.886 +10:00 [INF] Registration attempt for email: bankuser@example.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 21:01:48.012 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:01:48.027 +10:00 [INF] Executing BadRequestObjectResult, writing value of type 'BankingSystem.API.Controllers.ErrorResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:01:48.029 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API) in 147.533ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:01:48.029 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:01:48.030 +10:00 [INF] HTTP POST /api/auth/register responded 400 in 155.1360 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:01:48.031 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/register - 400 null application/json; charset=utf-8 161.3848ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:02:05.211 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/register - application/json 177 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:02:05.214 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:02:05.215 +10:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BankingSystem.API.Controllers.RegisterRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:02:05.219 +10:00 [INF] Registration attempt for email: bankuser@example.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 21:02:05.223 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:02:05.478 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:02:05.485 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:02:05.797 +10:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (DbType = Int32), @p2='?', @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (Size = 20), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (Size = 4), @p10='?', @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime), @p13='?' (Size = 4), @p14='?' (DbType = Boolean), @p15='?' (DbType = DateTimeOffset), @p16='?' (DbType = DateTime), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (Size = 84), @p20='?', @p21='?' (DbType = Boolean), @p22='?' (Size = 32), @p23='?' (DbType = Boolean), @p24='?' (DbType = DateTime), @p25='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("Id", "AccessFailedCount", "Address", "ConcurrencyStamp", "CreatedAt", "DateOfBirth", "Email", "EmailConfirmed", "FailedLoginAttempts", "FirstName", "IdNumber", "IsActive", "LastLoginAt", "LastName", "LockoutEnabled", "LockoutEnd", "LockoutEndTime", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "SecurityStamp", "TwoFactorEnabled", "UpdatedAt", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25); <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:02:05.819 +10:00 [ERR] An exception occurred in the database while saving changes for context type 'BankingSystem.Data.BankingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: AspNetUsers.IdNumber'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) <s:Microsoft.EntityFrameworkCore.Update>
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: AspNetUsers.IdNumber'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-08-17 21:02:05.827 +10:00 [ERR] Error during user registration <s:BankingSystem.API.Controllers.AuthController>
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: AspNetUsers.IdNumber'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.CreateAsync(TUser user, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user)
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user, String password)
   at BankingSystem.API.Controllers.AuthController.Register(RegisterRequest request) in /root/projects/banksys/backend/BankingSystem.API/Controllers/AuthController.cs:line 73
[2025-08-17 21:02:05.841 +10:00 [INF] Executing ObjectResult, writing value of type 'BankingSystem.API.Controllers.ErrorResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:02:05.843 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API) in 624.8898ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:02:05.845 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Register (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:02:05.847 +10:00 [ERR] HTTP POST /api/auth/register responded 500 in 632.4125 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:02:05.849 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/register - 500 null application/json; charset=utf-8 637.5514ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:07:52.907 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/login - application/json 81 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:07:52.910 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:07:52.911 +10:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankingSystem.API.Controllers.LoginRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:07:52.915 +10:00 [INF] Login attempt for email: modingshuo@gmail.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 21:07:52.922 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:07:53.036 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:07:53.040 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:07:53.054 +10:00 [INF] Executed DbCommand (2ms) [Parameters=[@p25='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?', @p2='?' (Size = 36), @p26='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?', @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (Size = 2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (DbType = DateTime), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 84), @p19='?' (Size = 10), @p20='?' (DbType = Boolean), @p21='?' (Size = 32), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTime), @p24='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Address" = @p1, "ConcurrencyStamp" = @p2, "CreatedAt" = @p3, "DateOfBirth" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "FailedLoginAttempts" = @p7, "FirstName" = @p8, "IdNumber" = @p9, "IsActive" = @p10, "LastLoginAt" = @p11, "LastName" = @p12, "LockoutEnabled" = @p13, "LockoutEnd" = @p14, "LockoutEndTime" = @p15, "NormalizedEmail" = @p16, "NormalizedUserName" = @p17, "PasswordHash" = @p18, "PhoneNumber" = @p19, "PhoneNumberConfirmed" = @p20, "SecurityStamp" = @p21, "TwoFactorEnabled" = @p22, "UpdatedAt" = @p23, "UserName" = @p24
WHERE "Id" = @p25 AND "ConcurrencyStamp" = @p26
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:07:53.114 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:07:53.128 +10:00 [INF] User logged in successfully: 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 21:07:53.129 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AuthResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:07:53.132 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API) in 220.6811ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:07:53.133 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:07:53.133 +10:00 [INF] HTTP POST /api/auth/login responded 200 in 223.4709 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:07:53.134 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/login - 200 null application/json; charset=utf-8 227.6171ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:08:19.859 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/account/list - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:08:19.907 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.GetUserAccounts (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:08:19.921 +10:00 [INF] Route matched with {action = "GetUserAccounts", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserAccounts() on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:08:19.934 +10:00 [INF] Retrieving accounts for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 21:08:19.959 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."UserId" = @__userId_0
ORDER BY "a"."CreatedAt" DESC <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:08:20.020 +10:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.Collections.Generic.List`1[[BankingSystem.API.Controllers.AccountResponse, BankingSystem.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:08:20.057 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.GetUserAccounts (BankingSystem.API) in 134.4448ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:08:20.058 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.GetUserAccounts (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:08:20.059 +10:00 [INF] HTTP GET /api/account/list responded 200 in 152.5278 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:08:20.061 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/account/list - 200 null application/json; charset=utf-8 202.0663ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:08:51.309 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - application/json 90 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:08:51.320 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:08:51.330 +10:00 [INF] Route matched with {action = "Deposit", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Deposit(BankingSystem.API.Controllers.DepositRequest) on controller BankingSystem.API.Controllers.TransactionController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:08:51.348 +10:00 [INF] Processing deposit for account 3 by user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 21:08:51.424 +10:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. <s:Microsoft.EntityFrameworkCore.Query>
[2025-08-17 21:08:51.450 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:08:51.473 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:08:51.485 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:08:51.488 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:08:51.506 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "AvailableBalance" = @p0, "Balance" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:08:51.509 +10:00 [INF] Balance updated for account 3 to 750.00 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 21:08:51.516 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.Data.Services.TransactionService>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 81
[2025-08-17 21:08:51.521 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.API.Controllers.TransactionController>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 81
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 94
   at BankingSystem.API.Controllers.TransactionController.Deposit(DepositRequest request) in /root/projects/banksys/backend/BankingSystem.API/Controllers/TransactionController.cs:line 66
[2025-08-17 21:08:51.523 +10:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:08:51.525 +10:00 [INF] Executed action BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API) in 193.9818ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:08:51.526 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:08:51.526 +10:00 [ERR] HTTP POST /api/transaction/deposit responded 500 in 206.7098 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:08:51.527 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - 500 null application/json; charset=utf-8 217.6727ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:09:44.514 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/account/3 - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:09:44.519 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:09:44.525 +10:00 [INF] Route matched with {action = "GetAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAccount(Int32) on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:09:44.531 +10:00 [INF] Retrieving account 3 for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 21:09:44.535 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:09:44.545 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AccountDetailResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:09:44.559 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API) in 32.506ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:09:44.560 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:09:44.561 +10:00 [INF] HTTP GET /api/account/3 responded 200 in 41.4400 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:09:44.562 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/account/3 - 200 null application/json; charset=utf-8 48.1346ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:18:46.385 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:19:09.617 +10:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:19:09.755 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 21:19:10.654 +10:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:19:10.782 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 21:19:10.789 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:19:10.794 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 21:19:10.795 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 21:19:10.801 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 21:19:10.822 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 21:19:10.966 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:19:10.972 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:19:10.975 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:19:10.978 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:19:11.446 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - application/json 90 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:19:11.528 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 21:19:11.651 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:19:11.681 +10:00 [INF] Route matched with {action = "Deposit", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Deposit(BankingSystem.API.Controllers.DepositRequest) on controller BankingSystem.API.Controllers.TransactionController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:19:11.824 +10:00 [INF] Processing deposit for account 3 by user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 21:19:11.969 +10:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. <s:Microsoft.EntityFrameworkCore.Query>
[2025-08-17 21:19:12.025 +10:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:19:12.214 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:19:12.239 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:19:12.247 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:19:12.418 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "AvailableBalance" = @p0, "Balance" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:19:12.437 +10:00 [INF] Balance updated for account 3 to 750.00 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 21:19:12.452 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.Data.Services.TransactionService>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 83
[2025-08-17 21:19:12.470 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.API.Controllers.TransactionController>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 83
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 96
   at BankingSystem.API.Controllers.TransactionController.Deposit(DepositRequest request) in /root/projects/banksys/backend/BankingSystem.API/Controllers/TransactionController.cs:line 66
[2025-08-17 21:19:12.487 +10:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:19:12.526 +10:00 [INF] Executed action BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API) in 838.7855ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:19:12.536 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:19:12.542 +10:00 [ERR] HTTP POST /api/transaction/deposit responded 500 in 889.9756 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:19:12.557 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - 500 null application/json; charset=utf-8 1112.1584ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:20:45.836 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/auth/login - application/json 81 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:20:45.846 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:20:45.862 +10:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BankingSystem.API.Controllers.LoginRequest) on controller BankingSystem.API.Controllers.AuthController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:20:45.896 +10:00 [INF] Login attempt for email: modingshuo@gmail.com <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 21:20:45.977 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:20:46.107 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:20:46.115 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccessFailedCount", "a"."Address", "a"."ConcurrencyStamp", "a"."CreatedAt", "a"."DateOfBirth", "a"."Email", "a"."EmailConfirmed", "a"."FailedLoginAttempts", "a"."FirstName", "a"."IdNumber", "a"."IsActive", "a"."LastLoginAt", "a"."LastName", "a"."LockoutEnabled", "a"."LockoutEnd", "a"."LockoutEndTime", "a"."NormalizedEmail", "a"."NormalizedUserName", "a"."PasswordHash", "a"."PhoneNumber", "a"."PhoneNumberConfirmed", "a"."SecurityStamp", "a"."TwoFactorEnabled", "a"."UpdatedAt", "a"."UserName"
FROM "AspNetUsers" AS "a"
WHERE "a"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:20:46.132 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p25='?' (Size = 36), @p0='?' (DbType = Int32), @p1='?', @p2='?' (Size = 36), @p26='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 20), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 6), @p9='?', @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime), @p12='?' (Size = 2), @p13='?' (DbType = Boolean), @p14='?' (DbType = DateTimeOffset), @p15='?' (DbType = DateTime), @p16='?' (Size = 20), @p17='?' (Size = 20), @p18='?' (Size = 84), @p19='?' (Size = 10), @p20='?' (DbType = Boolean), @p21='?' (Size = 32), @p22='?' (DbType = Boolean), @p23='?' (DbType = DateTime), @p24='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p0, "Address" = @p1, "ConcurrencyStamp" = @p2, "CreatedAt" = @p3, "DateOfBirth" = @p4, "Email" = @p5, "EmailConfirmed" = @p6, "FailedLoginAttempts" = @p7, "FirstName" = @p8, "IdNumber" = @p9, "IsActive" = @p10, "LastLoginAt" = @p11, "LastName" = @p12, "LockoutEnabled" = @p13, "LockoutEnd" = @p14, "LockoutEndTime" = @p15, "NormalizedEmail" = @p16, "NormalizedUserName" = @p17, "PasswordHash" = @p18, "PhoneNumber" = @p19, "PhoneNumberConfirmed" = @p20, "SecurityStamp" = @p21, "TwoFactorEnabled" = @p22, "UpdatedAt" = @p23, "UserName" = @p24
WHERE "Id" = @p25 AND "ConcurrencyStamp" = @p26
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:20:46.164 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "a0"."Name"
FROM "AspNetUserRoles" AS "a"
INNER JOIN "AspNetRoles" AS "a0" ON "a"."RoleId" = "a0"."Id"
WHERE "a"."UserId" = @__userId_0 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:20:46.176 +10:00 [INF] User logged in successfully: 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AuthController>
[2025-08-17 21:20:46.179 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AuthResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:20:46.183 +10:00 [INF] Executed action BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API) in 319.7375ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:20:46.184 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AuthController.Login (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:20:46.185 +10:00 [INF] HTTP POST /api/auth/login responded 200 in 338.3712 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:20:46.187 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/auth/login - 200 null application/json; charset=utf-8 351.0107ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:21:07.175 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - application/json 90 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:21:07.185 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:21:07.187 +10:00 [INF] Route matched with {action = "Deposit", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Deposit(BankingSystem.API.Controllers.DepositRequest) on controller BankingSystem.API.Controllers.TransactionController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:21:07.191 +10:00 [INF] Processing deposit for account 3 by user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 21:21:07.197 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:21:07.201 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:21:07.219 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:21:07.222 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:21:07.224 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "AvailableBalance" = @p0, "Balance" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:21:07.225 +10:00 [INF] Balance updated for account 3 to 750.00 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 21:21:07.225 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.Data.Services.TransactionService>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 83
[2025-08-17 21:21:07.227 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.API.Controllers.TransactionController>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 83
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 96
   at BankingSystem.API.Controllers.TransactionController.Deposit(DepositRequest request) in /root/projects/banksys/backend/BankingSystem.API/Controllers/TransactionController.cs:line 66
[2025-08-17 21:21:07.230 +10:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:21:07.231 +10:00 [INF] Executed action BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API) in 42.9957ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:21:07.232 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:21:07.232 +10:00 [ERR] HTTP POST /api/transaction/deposit responded 500 in 47.7965 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:21:07.234 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - 500 null application/json; charset=utf-8 58.4706ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:22:17.564 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:22:32.904 +10:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:22:33.021 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 21:22:33.619 +10:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:22:33.746 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 21:22:33.751 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:22:32.029 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 21:22:32.031 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 21:22:32.037 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 21:22:32.068 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 21:22:32.234 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:22:32.240 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:22:32.242 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:22:32.244 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:22:40.022 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - application/json 90 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:22:40.069 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 21:22:40.150 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:22:40.169 +10:00 [INF] Route matched with {action = "Deposit", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Deposit(BankingSystem.API.Controllers.DepositRequest) on controller BankingSystem.API.Controllers.TransactionController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:22:40.256 +10:00 [INF] Processing deposit for account 3 by user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 21:22:40.352 +10:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. <s:Microsoft.EntityFrameworkCore.Query>
[2025-08-17 21:22:40.382 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:22:40.496 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:22:40.509 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:22:40.513 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:22:40.604 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "AvailableBalance" = @p0, "Balance" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:22:40.616 +10:00 [INF] Balance updated for account 3 to 750.00 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 21:22:40.624 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.Data.Services.TransactionService>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 83
[2025-08-17 21:22:40.634 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.API.Controllers.TransactionController>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 83
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 96
   at BankingSystem.API.Controllers.TransactionController.Deposit(DepositRequest request) in /root/projects/banksys/backend/BankingSystem.API/Controllers/TransactionController.cs:line 66
[2025-08-17 21:22:40.645 +10:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:22:40.668 +10:00 [INF] Executed action BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API) in 495.6546ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:22:40.673 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:22:40.676 +10:00 [ERR] HTTP POST /api/transaction/deposit responded 500 in 527.3158 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:22:40.684 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - 500 null application/json; charset=utf-8 663.6393ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:26:44.290 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:27:08.403 +10:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:27:08.617 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 21:27:09.454 +10:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:27:09.623 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 21:27:09.634 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:27:09.637 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 21:27:09.639 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 21:27:09.652 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 21:27:09.689 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 21:27:09.863 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:27:09.871 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:27:09.874 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:27:09.876 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:27:14.508 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.html - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:14.667 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.html - 200 null text/html;charset=utf-8 160.1728ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:14.792 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui.css - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:14.792 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/index.css - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:14.810 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/index.css - 200 202 text/css 17.7285ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:14.847 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/swagger-ui.css - 200 155175 text/css 64.3429ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:15.087 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:15.090 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/swagger/favicon-32x32.png - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:15.095 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/favicon-32x32.png - 200 628 image/png 4.7994ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:15.421 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 334.1767ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:43.246 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - application/json 90 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:27:43.261 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 21:27:43.360 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:27:43.378 +10:00 [INF] Route matched with {action = "Deposit", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Deposit(BankingSystem.API.Controllers.DepositRequest) on controller BankingSystem.API.Controllers.TransactionController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:27:43.428 +10:00 [INF] Processing deposit for account 3 by user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 21:27:43.523 +10:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. <s:Microsoft.EntityFrameworkCore.Query>
[2025-08-17 21:27:43.552 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:27:43.668 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:27:43.680 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:27:43.684 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:27:43.781 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "AvailableBalance" = @p0, "Balance" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:27:43.792 +10:00 [INF] Balance updated for account 3 to 750.00 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 21:27:43.801 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.Data.Services.TransactionService>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 83
[2025-08-17 21:27:43.810 +10:00 [ERR] Error processing deposit for account 3 <s:BankingSystem.API.Controllers.TransactionController>
System.InvalidOperationException: The connection is already in a transaction and cannot participate in another transaction.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.EnsureNoTransactions()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at BankingSystem.Data.Services.TransactionService.CreateTransactionAsync(Int32 fromAccountId, Int32 toAccountId, Decimal amount, String description, String transactionType) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 27
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 83
   at BankingSystem.Data.Services.TransactionService.DepositAsync(Int32 accountId, Decimal amount, String description) in /root/projects/banksys/backend/BankingSystem.Data/Services/TransactionService.cs:line 96
   at BankingSystem.API.Controllers.TransactionController.Deposit(DepositRequest request) in /root/projects/banksys/backend/BankingSystem.API/Controllers/TransactionController.cs:line 66
[2025-08-17 21:27:43.820 +10:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`4[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:27:43.841 +10:00 [INF] Executed action BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API) in 460.0028ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:27:43.842 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:27:43.844 +10:00 [ERR] HTTP POST /api/transaction/deposit responded 500 in 484.3874 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:27:43.852 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - 500 null application/json; charset=utf-8 606.01ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:30:19.228 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:30:29.781 +10:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:30:29.939 +10:00 [INF] Database connection verified successfully <s:>
[2025-08-17 21:30:30.336 +10:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:30:30.434 +10:00 [INF] Role already exists: Admin <s:>
[2025-08-17 21:30:30.442 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."ConcurrencyStamp", "a"."Name", "a"."NormalizedName"
FROM "AspNetRoles" AS "a"
WHERE "a"."NormalizedName" = @__normalizedName_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:30:30.451 +10:00 [INF] Role already exists: Customer <s:>
[2025-08-17 21:30:30.452 +10:00 [INF] Role initialization completed successfully <s:>
[2025-08-17 21:30:30.456 +10:00 [INF] Banking System API starting up... <s:>
[2025-08-17 21:30:30.491 +10:00 [INF] User profile is available. Using '/root/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest. <s:Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager>
[2025-08-17 21:30:30.639 +10:00 [INF] Now listening on: http://localhost:5255 <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:30:30.644 +10:00 [INF] Application started. Press Ctrl+C to shut down. <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:30:30.645 +10:00 [INF] Hosting environment: Development <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:30:30.646 +10:00 [INF] Content root path: /root/projects/banksys/backend/BankingSystem.API <s:Microsoft.Hosting.Lifetime>
[2025-08-17 21:30:54.486 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - application/json 90 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:30:54.665 +10:00 [WRN] Failed to determine the https port for redirect. <s:Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware>
[2025-08-17 21:30:54.875 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:30:54.910 +10:00 [INF] Route matched with {action = "Deposit", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Deposit(BankingSystem.API.Controllers.DepositRequest) on controller BankingSystem.API.Controllers.TransactionController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:30:55.091 +10:00 [INF] Processing deposit for account 3 by user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 21:30:55.327 +10:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'. <s:Microsoft.EntityFrameworkCore.Query>
[2025-08-17 21:30:55.391 +10:00 [INF] Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:30:55.639 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:30:55.668 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:30:55.676 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:30:55.880 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "AvailableBalance" = @p0, "Balance" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:30:55.899 +10:00 [INF] Balance updated for account 3 to 750.00 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 21:30:56.016 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (Size = 21), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (Size = 9), @p6='?' (DbType = Int32), @p7='?' (Size = 36), @p8='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Transactions" ("Amount", "CreatedAt", "Description", "FromAccountId", "ProcessedAt", "Status", "ToAccountId", "TransactionId", "TransactionType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:30:56.045 +10:00 [INF] Transaction created: 1 - Deposit of 250.00 <s:BankingSystem.Data.Services.TransactionService>
[2025-08-17 21:30:56.069 +10:00 [INF] Deposit successful: Account 3, Amount 250.00, New Balance 750.00 <s:BankingSystem.Data.Services.TransactionService>
[2025-08-17 21:30:56.073 +10:00 [INF] Deposit successful: Transaction 1 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 21:30:56.089 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.TransactionResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:30:56.147 +10:00 [INF] Executed action BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API) in 1229.877ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:30:56.157 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.TransactionController.Deposit (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:30:56.162 +10:00 [INF] HTTP POST /api/transaction/deposit responded 200 in 1287.3851 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:30:56.178 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/transaction/deposit - 200 null application/json; charset=utf-8 1693.9192ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:33:39.261 +10:00 [INF] Request starting HTTP/1.1 POST http://localhost:5255/api/transaction/withdraw - application/json 90 <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:33:39.273 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.TransactionController.Withdraw (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:33:39.288 +10:00 [INF] Route matched with {action = "Withdraw", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Withdraw(BankingSystem.API.Controllers.WithdrawRequest) on controller BankingSystem.API.Controllers.TransactionController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:33:39.303 +10:00 [INF] Processing withdrawal for account 3 by user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 21:33:39.370 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:33:39.375 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:33:39.380 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:33:39.393 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId"
FROM "Accounts" AS "a"
WHERE "a"."Id" = @__accountId_0
LIMIT 1 <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:33:39.395 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:33:39.397 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Decimal), @p1='?' (DbType = Decimal), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Accounts" SET "AvailableBalance" = @p0, "Balance" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3
RETURNING 1; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:33:39.399 +10:00 [INF] Balance updated for account 3 to 650.00 <s:BankingSystem.Data.Services.AccountService>
[2025-08-17 21:33:39.404 +10:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = DateTime), @p2='?' (Size = 21), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (Size = 9), @p6='?' (DbType = Int32), @p7='?' (Size = 36), @p8='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Transactions" ("Amount", "CreatedAt", "Description", "FromAccountId", "ProcessedAt", "Status", "ToAccountId", "TransactionId", "TransactionType")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING "Id"; <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:33:39.406 +10:00 [INF] Transaction created: 2 - Withdrawal of 100.00 <s:BankingSystem.Data.Services.TransactionService>
[2025-08-17 21:33:39.417 +10:00 [INF] Withdrawal successful: Account 3, Amount 100.00, New Balance 650.00 <s:BankingSystem.Data.Services.TransactionService>
[2025-08-17 21:33:39.417 +10:00 [INF] Withdrawal successful: Transaction 2 <s:BankingSystem.API.Controllers.TransactionController>
[2025-08-17 21:33:39.418 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.TransactionResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:33:39.420 +10:00 [INF] Executed action BankingSystem.API.Controllers.TransactionController.Withdraw (BankingSystem.API) in 130.7398ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:33:39.421 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.TransactionController.Withdraw (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:33:39.421 +10:00 [INF] HTTP POST /api/transaction/withdraw responded 200 in 148.1106 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:33:39.423 +10:00 [INF] Request finished HTTP/1.1 POST http://localhost:5255/api/transaction/withdraw - 200 null application/json; charset=utf-8 161.7753ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:35:16.553 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/account/3 - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:35:16.575 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:35:16.580 +10:00 [INF] Route matched with {action = "GetAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAccount(Int32) on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:35:16.596 +10:00 [INF] Retrieving account 3 for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 21:35:16.599 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:35:16.615 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AccountDetailResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:35:16.634 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API) in 52.5218ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:35:16.635 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:35:16.636 +10:00 [INF] HTTP GET /api/account/3 responded 200 in 60.9495 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:35:16.638 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/account/3 - 200 null application/json; charset=utf-8 84.9055ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:36:48.700 +10:00 [INF] Request starting HTTP/1.1 GET http://localhost:5255/api/account/3 - null null <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 21:36:48.705 +10:00 [INF] Executing endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:36:48.707 +10:00 [INF] Route matched with {action = "GetAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAccount(Int32) on controller BankingSystem.API.Controllers.AccountController (BankingSystem.API). <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:36:48.709 +10:00 [INF] Retrieving account 3 for user 5ff1afbf-638a-41ec-ae96-d10d5eda5f03 <s:BankingSystem.API.Controllers.AccountController>
[2025-08-17 21:36:48.712 +10:00 [INF] Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."AccountName", "s"."AccountNumber", "s"."AccountType", "s"."AvailableBalance", "s"."Balance", "s"."CreatedAt", "s"."IsActive", "s"."UpdatedAt", "s"."UserId", "s"."Id0", "s"."AccessFailedCount", "s"."Address", "s"."ConcurrencyStamp", "s"."CreatedAt0", "s"."DateOfBirth", "s"."Email", "s"."EmailConfirmed", "s"."FailedLoginAttempts", "s"."FirstName", "s"."IdNumber", "s"."IsActive0", "s"."LastLoginAt", "s"."LastName", "s"."LockoutEnabled", "s"."LockoutEnd", "s"."LockoutEndTime", "s"."NormalizedEmail", "s"."NormalizedUserName", "s"."PasswordHash", "s"."PhoneNumber", "s"."PhoneNumberConfirmed", "s"."SecurityStamp", "s"."TwoFactorEnabled", "s"."UpdatedAt0", "s"."UserName", "t"."Id", "t"."Amount", "t"."CreatedAt", "t"."Description", "t"."FromAccountId", "t"."ProcessedAt", "t"."Status", "t"."ToAccountId", "t"."TransactionId", "t"."TransactionType", "t0"."Id", "t0"."Amount", "t0"."CreatedAt", "t0"."Description", "t0"."FromAccountId", "t0"."ProcessedAt", "t0"."Status", "t0"."ToAccountId", "t0"."TransactionId", "t0"."TransactionType"
FROM (
    SELECT "a"."Id", "a"."AccountName", "a"."AccountNumber", "a"."AccountType", "a"."AvailableBalance", "a"."Balance", "a"."CreatedAt", "a"."IsActive", "a"."UpdatedAt", "a"."UserId", "a0"."Id" AS "Id0", "a0"."AccessFailedCount", "a0"."Address", "a0"."ConcurrencyStamp", "a0"."CreatedAt" AS "CreatedAt0", "a0"."DateOfBirth", "a0"."Email", "a0"."EmailConfirmed", "a0"."FailedLoginAttempts", "a0"."FirstName", "a0"."IdNumber", "a0"."IsActive" AS "IsActive0", "a0"."LastLoginAt", "a0"."LastName", "a0"."LockoutEnabled", "a0"."LockoutEnd", "a0"."LockoutEndTime", "a0"."NormalizedEmail", "a0"."NormalizedUserName", "a0"."PasswordHash", "a0"."PhoneNumber", "a0"."PhoneNumberConfirmed", "a0"."SecurityStamp", "a0"."TwoFactorEnabled", "a0"."UpdatedAt" AS "UpdatedAt0", "a0"."UserName"
    FROM "Accounts" AS "a"
    INNER JOIN "AspNetUsers" AS "a0" ON "a"."UserId" = "a0"."Id"
    WHERE "a"."Id" = @__accountId_0
    LIMIT 1
) AS "s"
LEFT JOIN "Transactions" AS "t" ON "s"."Id" = "t"."FromAccountId"
LEFT JOIN "Transactions" AS "t0" ON "s"."Id" = "t0"."ToAccountId"
ORDER BY "s"."Id", "s"."Id0", "t"."Id" <s:Microsoft.EntityFrameworkCore.Database.Command>
[2025-08-17 21:36:48.720 +10:00 [INF] Executing OkObjectResult, writing value of type 'BankingSystem.API.Controllers.AccountDetailResponse'. <s:Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor>
[2025-08-17 21:36:48.721 +10:00 [INF] Executed action BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API) in 12.6997ms <s:Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker>
[2025-08-17 21:36:48.723 +10:00 [INF] Executed endpoint 'BankingSystem.API.Controllers.AccountController.GetAccount (BankingSystem.API)' <s:Microsoft.AspNetCore.Routing.EndpointMiddleware>
[2025-08-17 21:36:48.725 +10:00 [INF] HTTP GET /api/account/3 responded 200 in 19.5497 ms <s:Serilog.AspNetCore.RequestLoggingMiddleware>
[2025-08-17 21:36:48.726 +10:00 [INF] Request finished HTTP/1.1 GET http://localhost:5255/api/account/3 - 200 null application/json; charset=utf-8 25.343ms <s:Microsoft.AspNetCore.Hosting.Diagnostics>
[2025-08-17 23:19:04.941 +10:00 [INF] Application is shutting down... <s:Microsoft.Hosting.Lifetime>
